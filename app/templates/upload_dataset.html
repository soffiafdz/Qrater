{% extends "base.html" %}

{% block app_content %}
  <h1>Upload New Dataset</h1>
  <form
    class="form"
    id="datasetForm"
    action=""
    method="POST"
    role="form"
    enctype="multipart/form-data"
  >
    {{ form.csrf_token() }}
    <div class="form-floating col-md-6 mb-3">
      <input
        type="text"
        class="form-control"
        id="dataset_name"
        name="dataset_name"
        required
        placeholder="Dataset Name"
        >
      <label for="dataset_name">
        Dataset name
      </label>
    </div>
    <div class="col-md-6 mb-3">
      <label class="form-label" for="dataset">MRI files</label>
      <input
        type="file"
        class="form-control"
        id="dataset"
        name="dataset"
        required
        multiple
        >
    </div>
    <button
      class="btn btn-primary bn-lg"
      id="submitBtn"
      type="submit"
      form="datasetForm"
      value="Upload"
      >Upload</button>
  </form>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
  $(document).ready(function () {
    $("#datasetForm").submit(function() {
      $("#submitBtn").html(
        `<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Loading...`
      );
      $("#datasetForm :input").prop("readonly", true);
      $("#dataset").prop("readonly", true)
    });
  });
</script>
{% endblock %}
